TARGET = main
CXX = g++	
CXXFLAGS = -g -Wall -pedantic

SRCDIR   = src
OBJDIR   = obj
BINDIR   = bin

SOURCES = $(wildcard $(SRCDIR)/*.cpp)
HEADERS = $(wildcard $(SRCDIR)/*.h)
OBJECTS = $(SOURCES:$(SRCDIR)/%.cpp=$(OBJDIR)/%.o)
DEPS = $(SOURCES:$(SRCDIR)/%.cpp=$(OBJDIR)/%.d)

$(BINDIR)/$(TARGET): $(OBJECTS)
	$(CXX) -o $@ $(OBJECTS) $(LDFLAGS) 

$(OBJECTS): $(OBJDIR)/%.o : $(SRCDIR)/%.cpp
	$(CXX) -c -o $@ $(CXXFLAGS) -MMD $< 


include $(DEPS)

$(DEPS): ;

.PHONY: clean
clean:
	del obj\*.* bin\*.*

.PHONY: doc
doc: $(SOURCES) $(HEADERS)
	doxygen
